<% provide(:title, @box.uid) %>
<div class="jumbotron">
  <div class="container">
    <h1>Box <%= @box.uid %></h1>
    <p>ReThink. ReStore. ReUse.</p>
  </div>
</div>
<div class='container'>
  <div class='row'>
    <div class="col-sm-4 col-sm-offset-2">
      <h3>Box properties</h3>
      <p><%= @box.length %>in x <%= @box.width %>in x <%= @box.height %>in and <%= @box.weight %>lbs</p>
      <p>Comparable cardboard box price: <%= number_to_currency(@cb) %></p>
      <p><%= @box.in %> total purchased</p>
      <p><%= @box.in - @box.out %> currently in rotation</p>
    </div>
    <div class="col-sm-4">
      <h3>Status <small>(editable)</small></h3>
      <p>Box ID: <%= best_in_place_if (admin? || owner?), @box, :uid %></p>
      <p>Multiplier (if cardboard box was used multiple times, then how many?): <span class='edit'><%= best_in_place_if (admin? || owner?), @box, :multiplier %></span></p>
      <p class='wide'>Active? <span class='edit'><%= best_in_place_if (admin? || owner?), @box, :active, type: :checkbox %></span></p>
      <p class='wide'>Shipments per month: <span class='edit'><%= best_in_place_if (admin? || owner?), @box, :frequency %></span></p>
    </div>
  </div>
  <div class='row'>
    <div class="col-sm-8 col-sm-offset-2 well">
      <h3>Trip History <small>(editable)</small></h3>
      <table class="table table-striped table-bordered trips">
        <thead>
          <tr>
            <th>Month</th>
            <th>Shipped</th>
            <th>Retired</th>
          </tr>
        </thead>
        <tbody>
          <%- @box.trips.order('month desc').each do |t| %>
            <tr>
              <td><%= t.month.strftime('%B %Y') %></td>
              <td class='edit'><%= best_in_place_if (admin? || owner?), t, :quantity %></td>
              <td class='edit'><%= best_in_place_if (admin? || owner?), t, :retired %></td>
            </tr>
          <%- end %>
        </tbody>
      </table>
    </div>
  </div>
</div>