<% provide(:title, @order.invoice) %>
<div class="jumbotron">
  <div class="container">
    <h1>Invoice <%= @order.invoice %></h1>
    <p>ReThink. ReStore. ReUse.</p>
  </div>
</div> 
<div class='container'>
  <div class='row'>
    <div class="col-sm-10 col-sm-offset-1 well">
      <p>Invoice # <span class='edit'><%= best_in_place_if (admin?), @order, :invoice %></span></p>
      <p>Ordered on: <%= @order.ordered_on.to_formatted_s :long_ordinal %></p>
      <p>Delivered on: <%= @order.delivered_on.to_formatted_s :long_ordinal %></p>

      <table class="table table-striped table-bordered">
        <h3>Details</h3>
        <thead>
          <tr>
            <th>Box</th>
            <th>Quantity</th>
            <th>Box Price</th>
            <th>Mould Fees</th>
            <th>Totals</th>
          </tr>
        </thead>
        <tbody>
          <%- @details.each do |d| %>
            <tr>
              <td><%= link_to Box.find(d.box_id).uid, Box.find(d.box_id), target: '_blank' %></td>
              <td><%= number_with_delimiter(d.quantity) %></td>
              <td><%= number_to_currency(d.box_price) %></td>
              <td><%= number_to_currency(d.mould_fees) %></td>
              <td><%= number_to_currency((d.quantity * d.box_price + d.mould_fees), precision: 0) %></td>
            </tr>
          <%- end %>
            <tr>
              <td></td><td></td><td></td><td></td>
              <td><strong><%= number_to_currency(@order.cost, precision: 0) %></strong></td>
            </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>