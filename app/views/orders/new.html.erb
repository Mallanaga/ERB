<% provide(:title, 'New order') %>
<div class="jumbotron">
  <div class="container">
    <h1>New Order</h1>
    <p>ReThink. ReStore. ReUse.</p>
  </div>
</div> 
<%= form_for @order, html:{class: "form-horizontal", role: "form"} do |f| %>
<div class='container'>
  <div class='row'>
    <div class="col-sm-10 col-sm-offset-1 well">
      <%= f.submit "Don't push...", class: 'pull-right btn btn-primary', remote: true %>
      <div class="form-group">
        <%= f.label :invoice, 'Invoice #', class: 'col-sm-2 control-label' %>
        <div class='col-sm-4'>
          <%= f.text_field :invoice, class: 'form-control' %>
        </div>
      </div>
      <div class="form-group">
        <%= f.label :ordered_on, class: 'col-sm-2 control-label' %>
        <div class='col-sm-4'>
          <%= f.text_field :ordered_on, class: 'form-control' %>
        </div>
      </div>
      <div class="form-group">
        <%= f.label :delivered_on, class: 'col-sm-2 control-label' %>
        <div class='col-sm-4'>
          <%= f.text_field :delivered_on, class: 'form-control' %>
        </div>
      </div>

      <table  id='order_form' class="table table-striped table-bordered">
        <h3>Details</h3>
        <thead>
          <tr>
            <th>Box</th>
            <th>Quantity</th>
            <th>Box Price</th>
            <th>CB Price</th>
            <th>Mould Fees</th>
            <th>Totals</th>
          </tr>
        </thead>
        <tbody>
          <tr class='row0'>
            <%= form_tag box_detail_path, method: 'get', role: 'form', remote: true do %>
              <td><%= select_tag :box_id, options_for_select(@boxes.map{ |b| [b.uid, b.id] }), include_blank: true, onchange: "this.form.submit()", class: 'form-control' %></td>
            <% end %>

            <td><%= text_field_tag :quantity, nil, class: 'form-control' %></td>
            <td><%= text_field_tag :box_price, nil, class: 'form-control' %></td>
            <td><%= text_field_tag :cb_price, nil, class: 'form-control' %></td>
            <td><%= text_field_tag :mould_fees, nil, class: 'form-control' %></td>
            <td>$$$</td>
          </tr>

          <tr class='box0'>
            <td colspan="6">&#8594; <b><%= @b.uid %></b> | length: <%= @b.length %> | width: <%= @b.width %> | height: <%= @b.height %> | weight: <%= @b.weight %></td>
          </tr>

          <tr class='total'>
            <td><%= link_to 'add line', new_order_detail_path, class: 'btn btn-default', remote: true %></td><td><%= link_to 'new box', new_box_path, class: 'btn btn-default', remote: true %></td><td></td>
            <td style='text-align:right;font-weight:bold;'>tax</td>
            <td><%= text_field_tag :tax, nil, placeholder: '7.5%', class: 'form-control' %></td>
            <td><strong><%= number_to_currency(@order.cost, precision: 0) %></strong></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<% end %>